{
    "tasks": [
        {
            "environment": {},
            "displayName": "Run CredScan",
            "alwaysRun": false,
            "continueOnError": false,
            "condition": "succeeded()",
            "enabled": true,
            "timeoutInMinutes": 0,
            "inputs": {
                "toolMajorVersion": "V2",
                "outputFormat": "pre",
                "toolVersion": "Latest",
                "toolVersionV2": "Latest",
                "scanFolder": "$(Build.SourcesDirectory)",
                "searchersFileType": "Default",
                "m365Version": "Latest",
                "searchersFile": "",
                "suppressionsFile": "",
                "suppressAsError": "false",
                "verboseOutput": "false",
                "batchSize": "",
                "regexMatchTimeoutInSeconds": "",
                "fileScanReadBufferSize": "",
                "maxFileScanReadBytes": "",
                "debugMode": "false",
                "folderSuppression": "false"
            },
            "task": {
                "id": "ea576cd4-c61f-48f8-97e7-a3cb07b90a6f",
                "versionSpec": "2.*",
                "definitionType": "task"
            }
        },
        {
            "environment": {},
            "displayName": "Restore",
            "alwaysRun": false,
            "continueOnError": false,
            "condition": "succeeded()",
            "enabled": true,
            "timeoutInMinutes": 0,
            "inputs": {
                "command": "restore",
                "publishWebProjects": "true",
                "projects": "**/*.csproj",
                "custom": "",
                "arguments": "",
                "restoreArguments": "",
                "publishTestResults": "true",
                "testRunTitle": "",
                "zipAfterPublish": "true",
                "modifyOutputPath": "true",
                "selectOrConfig": "select",
                "feedRestore": "bd1fe2b6-e90c-44ee-8efd-1c1eeaaed221",
                "includeNuGetOrg": "true",
                "nugetConfigPath": "",
                "externalEndpoints": "",
                "noCache": "false",
                "packagesDirectory": "",
                "verbosityRestore": "Detailed",
                "searchPatternPush": "$(Build.ArtifactStagingDirectory)/*.nupkg",
                "nuGetFeedType": "internal",
                "feedPublish": "",
                "publishPackageMetadata": "true",
                "externalEndpoint": "",
                "searchPatternPack": "**/*.csproj",
                "configurationToPack": "$(BuildConfiguration)",
                "outputDir": "$(Build.ArtifactStagingDirectory)",
                "nobuild": "false",
                "includesymbols": "false",
                "includesource": "false",
                "versioningScheme": "off",
                "versionEnvVar": "",
                "requestedMajorVersion": "1",
                "requestedMinorVersion": "0",
                "requestedPatchVersion": "0",
                "buildProperties": "",
                "verbosityPack": "Detailed",
                "workingDirectory": ""
            },
            "task": {
                "id": "5541a522-603c-47ad-91fc-a4b1d163081b",
                "versionSpec": "2.*",
                "definitionType": "task"
            }
        },
        {
            "environment": {},
            "displayName": "Run Roslyn Analyzers",
            "alwaysRun": false,
            "continueOnError": false,
            "condition": "succeeded()",
            "enabled": false,
            "timeoutInMinutes": 0,
            "inputs": {
                "userProvideBuildInfo": "msBuildInfo",
                "msBuildVersion": "16.0",
                "msBuildArchitecture": "x86",
                "msBuildCommandline": "dotnet",
                "rulesetName": "Recommended",
                "rulesetVersion": "Latest",
                "customRuleset": "",
                "internalAnalyzersVersion": "Latest",
                "microsoftAnalyzersVersion": "Latest",
                "suppressionFileForCompilerWarnings": ""
            },
            "task": {
                "id": "d3a6d60f-4ade-4a25-b3ae-8fa59d370825",
                "versionSpec": "3.*",
                "definitionType": "task"
            }
        },
        {
            "environment": {},
            "displayName": "Build",
            "alwaysRun": false,
            "continueOnError": false,
            "condition": "succeeded()",
            "enabled": true,
            "timeoutInMinutes": 0,
            "inputs": {
                "command": "build",
                "publishWebProjects": "true",
                "projects": "**/*.csproj",
                "custom": "",
                "arguments": "--configuration $(BuildConfiguration)",
                "restoreArguments": "",
                "publishTestResults": "true",
                "testRunTitle": "",
                "zipAfterPublish": "true",
                "modifyOutputPath": "true",
                "selectOrConfig": "select",
                "feedRestore": "",
                "includeNuGetOrg": "true",
                "nugetConfigPath": "",
                "externalEndpoints": "",
                "noCache": "false",
                "packagesDirectory": "",
                "verbosityRestore": "Detailed",
                "searchPatternPush": "$(Build.ArtifactStagingDirectory)/*.nupkg",
                "nuGetFeedType": "internal",
                "feedPublish": "",
                "publishPackageMetadata": "true",
                "externalEndpoint": "",
                "searchPatternPack": "**/*.csproj",
                "configurationToPack": "$(BuildConfiguration)",
                "outputDir": "$(Build.ArtifactStagingDirectory)",
                "nobuild": "false",
                "includesymbols": "false",
                "includesource": "false",
                "versioningScheme": "off",
                "versionEnvVar": "",
                "requestedMajorVersion": "1",
                "requestedMinorVersion": "0",
                "requestedPatchVersion": "0",
                "buildProperties": "",
                "verbosityPack": "Detailed",
                "workingDirectory": ""
            },
            "task": {
                "id": "5541a522-603c-47ad-91fc-a4b1d163081b",
                "versionSpec": "2.*",
                "definitionType": "task"
            }
        },
        {
            "environment": {},
            "displayName": "Test",
            "alwaysRun": false,
            "continueOnError": false,
            "condition": "succeeded()",
            "enabled": true,
            "timeoutInMinutes": 0,
            "inputs": {
                "command": "test",
                "publishWebProjects": "true",
                "projects": "**/*[Uu]nit[Tt]ests/*.csproj",
                "custom": "",
                "arguments": "--configuration $(BuildConfiguration)",
                "restoreArguments": "",
                "publishTestResults": "true",
                "testRunTitle": "",
                "zipAfterPublish": "true",
                "modifyOutputPath": "true",
                "selectOrConfig": "select",
                "feedRestore": "",
                "includeNuGetOrg": "true",
                "nugetConfigPath": "",
                "externalEndpoints": "",
                "noCache": "false",
                "packagesDirectory": "",
                "verbosityRestore": "Detailed",
                "searchPatternPush": "$(Build.ArtifactStagingDirectory)/*.nupkg",
                "nuGetFeedType": "internal",
                "feedPublish": "",
                "publishPackageMetadata": "true",
                "externalEndpoint": "",
                "searchPatternPack": "**/*.csproj",
                "configurationToPack": "$(BuildConfiguration)",
                "outputDir": "$(Build.ArtifactStagingDirectory)",
                "nobuild": "false",
                "includesymbols": "false",
                "includesource": "false",
                "versioningScheme": "off",
                "versionEnvVar": "",
                "requestedMajorVersion": "1",
                "requestedMinorVersion": "0",
                "requestedPatchVersion": "0",
                "buildProperties": "",
                "verbosityPack": "Detailed",
                "workingDirectory": ""
            },
            "task": {
                "id": "5541a522-603c-47ad-91fc-a4b1d163081b",
                "versionSpec": "2.*",
                "definitionType": "task"
            }
        },
        {
            "environment": {},
            "displayName": "Run CodeMetrics ",
            "alwaysRun": false,
            "continueOnError": false,
            "condition": "succeeded()",
            "enabled": true,
            "timeoutInMinutes": 0,
            "inputs": {
                "Files": "$(Build.SourcesDirectory)\\**\\*.exe;$(Build.SourcesDirectory)\\**\\*.dll",
                "SearchGac": "true",
                "IgnoreInvalidTargets": "true",
                "IgnoreGeneratedCode": "true",
                "Directory": "",
                "Reference": "",
                "Platform": "",
                "Quiet": "false",
                "toolVersion": "Latest"
            },
            "task": {
                "id": "d72a577f-47a3-4634-86be-d7d8a535dd1a",
                "versionSpec": "1.*",
                "definitionType": "task"
            }
        },
        {
            "environment": {},
            "displayName": "Publish $(webProjName)",
            "alwaysRun": false,
            "continueOnError": false,
            "condition": "succeeded()",
            "enabled": true,
            "timeoutInMinutes": 0,
            "inputs": {
                "command": "publish",
                "publishWebProjects": "false",
                "projects": "**/$(webProjName).csproj",
                "custom": "",
                "arguments": "--configuration $(BuildConfiguration) --output $(build.artifactstagingdirectory)/$(webProjName)",
                "restoreArguments": "",
                "publishTestResults": "true",
                "testRunTitle": "",
                "zipAfterPublish": "True",
                "modifyOutputPath": "true",
                "selectOrConfig": "select",
                "feedRestore": "",
                "includeNuGetOrg": "true",
                "nugetConfigPath": "",
                "externalEndpoints": "",
                "noCache": "false",
                "packagesDirectory": "",
                "verbosityRestore": "Detailed",
                "searchPatternPush": "$(Build.ArtifactStagingDirectory)/*.nupkg",
                "nuGetFeedType": "internal",
                "feedPublish": "",
                "publishPackageMetadata": "true",
                "externalEndpoint": "",
                "searchPatternPack": "**/*.csproj",
                "configurationToPack": "$(BuildConfiguration)",
                "outputDir": "$(Build.ArtifactStagingDirectory)",
                "nobuild": "false",
                "includesymbols": "false",
                "includesource": "false",
                "versioningScheme": "off",
                "versionEnvVar": "",
                "requestedMajorVersion": "1",
                "requestedMinorVersion": "0",
                "requestedPatchVersion": "0",
                "buildProperties": "",
                "verbosityPack": "Detailed",
                "workingDirectory": ""
            },
            "task": {
                "id": "5541a522-603c-47ad-91fc-a4b1d163081b",
                "versionSpec": "2.*",
                "definitionType": "task"
            }
        },
        {
            "environment": {},
            "displayName": "Run MpCmdRun.exe",
            "alwaysRun": false,
            "continueOnError": false,
            "condition": "succeeded()",
            "enabled": true,
            "timeoutInMinutes": 0,
            "inputs": {
                "InputType": "Basic",
                "ScanType": "CustomScan",
                "FileDirPath": "$(Build.ArtifactStagingDirectory)",
                "DisableRemediation": "true",
                "BootSectorScan": "false",
                "Arguments": "-Scan -ScanType 3 -DisableRemediation -File $(Build.StagingDirectory)",
                "EnableServices": "true",
                "SupportLogOnError": "false",
                "TreatSignatureUpdateFailureAs": "Warning",
                "SignatureFreshness": "UpToDate",
                "TreatStaleSignatureAs": "Error"
            },
            "task": {
                "id": "3fc510b1-a9ae-488e-95cd-8f6811fc7c1f",
                "versionSpec": "3.*",
                "definitionType": "task"
            }
        },
        {
            "environment": {},
            "displayName": "Run BinSkim ",
            "alwaysRun": false,
            "continueOnError": false,
            "condition": "succeeded()",
            "enabled": true,
            "timeoutInMinutes": 0,
            "inputs": {
                "InputType": "CommandLine",
                "arguments": "analyze $(Build.ArtifactStagingDirectory)/* --recurse --output $(Build.BuildNumber).sarif",
                "Function": "analyze",
                "AnalyzeTarget": "$(Build.ArtifactStagingDirectory)\\*.dll;$(Build.ArtifactStagingDirectory)\\*.exe",
                "AnalyzeSymPath": "",
                "AnalyzeConfigPath": "default",
                "AnalyzePluginPath": "",
                "AnalyzeRecurse": "true",
                "AnalyzeVerbose": "false",
                "AnalyzeHashes": "false",
                "AnalyzeStatistics": "false",
                "AnalyzeEnvironment": "false",
                "ExportRulesOutputType": "SARIF",
                "DumpTarget": "$(Build.ArtifactStagingDirectory)",
                "DumpRecurse": "true",
                "DumpVerbose": "true",
                "toolVersion": "Latest"
            },
            "task": {
                "id": "3056813a-40e9-4b2f-8f6b-612d1bc4e045",
                "versionSpec": "3.*",
                "definitionType": "task"
            }
        },
        {
            "environment": {},
            "displayName": "Publish Artifact",
            "alwaysRun": true,
            "continueOnError": false,
            "condition": "succeededOrFailed()",
            "enabled": true,
            "timeoutInMinutes": 0,
            "inputs": {
                "PathtoPublish": "$(build.artifactstagingdirectory)/$(webProjName)",
                "ArtifactName": "$(webProjName)",
                "ArtifactType": "Container",
                "TargetPath": "\\\\my\\share\\$(Build.DefinitionName)\\$(Build.BuildNumber)",
                "Parallel": "false",
                "ParallelCount": "8",
                "FileCopyOptions": ""
            },
            "task": {
                "id": "2ff763a7-ce83-4e1f-bc89-0ae63477cebe",
                "versionSpec": "1.*",
                "definitionType": "task"
            }
        },
        {
            "environment": {},
            "displayName": "Publish Security Analysis Logs",
            "alwaysRun": false,
            "continueOnError": false,
            "condition": "succeeded()",
            "enabled": true,
            "timeoutInMinutes": 0,
            "inputs": {
                "ArtifactName": "CodeAnalysisLogs",
                "ArtifactType": "Container",
                "M365Version": "Latest",
                "TargetPath": "\\\\my\\share\\$(Build.DefinitionName)\\$(Build.BuildNumber)",
                "RvName": "",
                "ProductComponentName": "",
                "PlatformName": "",
                "AllTools": "true",
                "AntiMalware": "true",
                "APIScan": "true",
                "BinSkim": "true",
                "CodesignValidation": "true",
                "CredScan": "true",
                "FortifySCA": "true",
                "FxCop": "true",
                "ModernCop": "true",
                "MSRD": "true",
                "PoliCheck": "true",
                "RoslynAnalyzers": "true",
                "SDLNativeRules": "true",
                "Semmle": "true",
                "TSLint": "true",
                "WebScout": "true",
                "ToolLogsNotFoundAction": "Standard",
                "UploadCustomResults": "false",
                "CustomResultsPath": "",
                "CustomToolName": "FxCop",
                "BlobSasToken": "$(connectionBlobSas)",
                "BlobStorageAccountName": "$(blobAccountName)",
                "BlobContainerName": "$(blobContainerName)",
                "ServiceBusSasToken": "$(connectionServiceBusSas)",
                "ServiceBusUri": "$(serviceBusUriWithQueue)",
                "SdlAnalyticsServiceBusSasToken": "$(sdlAnalyticsServiceBusSasToken)",
                "SdlAnalyticsServiceBusUri": "$(sdlAnalyticsServiceBusUri)",
                "ProductCatalogClientId": "$(productCatalogClientId)",
                "ProductCatalogClientSecret": "$(productCatalogClientSecret)"
            },
            "task": {
                "id": "4096c760-3a8a-435d-9689-88c0311bbc0e",
                "versionSpec": "2.*",
                "definitionType": "task"
            }
        }
    ],
    "runsOn": [
        "Agent"
    ],
    "revision": 5,
    "createdBy": {
        "displayName": "Daniel Radu",
        "id": "1d923389-c58f-616d-819f-028629c0bfd9",
        "uniqueName": "daradu@microsoft.com"
    },
    "createdOn": "2020-06-10T02:16:07.820Z",
    "modifiedBy": {
        "displayName": "Daniel Radu",
        "id": "1d923389-c58f-616d-819f-028629c0bfd9",
        "uniqueName": "daradu@microsoft.com"
    },
    "modifiedOn": "2020-06-10T04:09:51.410Z",
    "comment": "",
    "id": "9d68efa4-5bc0-4244-90ac-f6e430982e46",
    "name": "template-BuildWebApp-MSCA-taskgroup",
    "version": {
        "major": 1,
        "minor": 0,
        "patch": 0,
        "isTest": false
    },
    "iconUrl": "https://cdn.vsassets.io/v/M159_20191103.2/_content/icon-meta-task.png",
    "friendlyName": "template-BuildWebApp-MSCA-taskgroup",
    "description": "",
    "category": "Build",
    "definitionType": "metaTask",
    "author": "Dan Radu",
    "demands": [],
    "groups": [],
    "inputs": [
        {
            "aliases": [],
            "options": {},
            "properties": {},
            "name": "blobAccountName",
            "label": "blobAccountName",
            "defaultValue": "$(blobAccountName)",
            "required": true,
            "type": "string",
            "helpMarkDown": "A secret build variable holding blob storage account name - contact m365sdlsupport@microsoft.com if it is missing in your Azure DevOps project",
            "groupName": ""
        },
        {
            "aliases": [],
            "options": {},
            "properties": {},
            "name": "blobContainerName",
            "label": "blobContainerName",
            "defaultValue": "$(blobContainerName)",
            "required": true,
            "type": "string",
            "helpMarkDown": "A secret build variable holding blob storage container name - contact m365sdlsupport@microsoft.com if it is missing in your Azure DevOps project",
            "groupName": ""
        },
        {
            "aliases": [],
            "options": {},
            "properties": {},
            "name": "BuildConfiguration",
            "label": "BuildConfiguration",
            "defaultValue": "Release",
            "required": true,
            "type": "string",
            "helpMarkDown": "",
            "groupName": ""
        },
        {
            "aliases": [],
            "options": {},
            "properties": {},
            "name": "connectionBlobSas",
            "label": "connectionBlobSas",
            "defaultValue": "$(connectionBlobSas)",
            "required": true,
            "type": "string",
            "helpMarkDown": "A secret build variable holding blob storage SAS token - contact m365sdlsupport@microsoft.com if it is missing in your Azure DevOps project",
            "groupName": ""
        },
        {
            "aliases": [],
            "options": {},
            "properties": {},
            "name": "connectionServiceBusSas",
            "label": "connectionServiceBusSas",
            "defaultValue": "$(connectionServiceBusSas)",
            "required": true,
            "type": "string",
            "helpMarkDown": "A secret build variable holding service bus SAS token - contact m365sdlsupport@microsoft.com if it is missing in your Azure DevOps project",
            "groupName": ""
        },
        {
            "aliases": [],
            "options": {},
            "properties": {},
            "name": "productCatalogClientId",
            "label": "productCatalogClientId",
            "defaultValue": "$(productCatalogClientId)",
            "required": true,
            "type": "string",
            "helpMarkDown": "A secret build variable holding Product Catalog client Id - contact m365sdlsupport@microsoft.com if it is missing in your Azure DevOps project",
            "groupName": ""
        },
        {
            "aliases": [],
            "options": {},
            "properties": {},
            "name": "productCatalogClientSecret",
            "label": "productCatalogClientSecret",
            "defaultValue": "$(productCatalogClientSecret)",
            "required": true,
            "type": "string",
            "helpMarkDown": "A secret build variable holding Product Catalog client secret - contact m365sdlsupport@microsoft.com if it is missing in your Azure DevOps project",
            "groupName": ""
        },
        {
            "aliases": [],
            "options": {},
            "properties": {},
            "name": "sdlAnalyticsServiceBusSasToken",
            "label": "sdlAnalyticsServiceBusSasToken",
            "defaultValue": "$(sdlAnalyticsServiceBusSasToken)",
            "required": true,
            "type": "string",
            "helpMarkDown": "A secret build variable holding SDL Analytics service bus SAS token - contact m365sdlsupport@microsoft.com if it is missing in your Azure DevOps project",
            "groupName": ""
        },
        {
            "aliases": [],
            "options": {},
            "properties": {},
            "name": "sdlAnalyticsServiceBusUri",
            "label": "sdlAnalyticsServiceBusUri",
            "defaultValue": "$(sdlAnalyticsServiceBusUri)",
            "required": true,
            "type": "string",
            "helpMarkDown": "A secret build variable holding SDL Analytics service bus URI - contact m365sdlsupport@microsoft.com if it is missing in your Azure DevOps project",
            "groupName": ""
        },
        {
            "aliases": [],
            "options": {},
            "properties": {},
            "name": "serviceBusUriWithQueue",
            "label": "serviceBusUriWithQueue",
            "defaultValue": "$(serviceBusUriWithQueue)",
            "required": true,
            "type": "string",
            "helpMarkDown": "A secret build variable holding service bus URI - contact m365sdlsupport@microsoft.com if it is missing in your Azure DevOps project",
            "groupName": ""
        },
        {
            "aliases": [],
            "options": {},
            "properties": {},
            "name": "webProjName",
            "label": "webProjName",
            "defaultValue": "",
            "required": true,
            "type": "string",
            "helpMarkDown": "",
            "groupName": ""
        }
    ],
    "satisfies": [],
    "sourceDefinitions": [],
    "dataSourceBindings": [],
    "instanceNameFormat": "Task group: BuildWebApp-MSCA",
    "preJobExecution": {},
    "execution": {},
    "postJobExecution": {}
}